{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/helpers/format.js","src/helpers/request.js","src/lib/history.js","src/lib/module.js","src/lib/utils.js","src/outlog.js"],"names":[],"mappings":"AAAA;;;;;;;ACAO,IAAM,sCAAe,SAAf,YAAe,CAAC,IAAD,EAAS;AACjC,WAAS,IAAI,QAAJ,KAAiB,CAAlB,GAAuB,GAAvB,GACP,IAAI,OAAJ,EADO,GACU,GADV,GAER,IAAI,WAAJ,EAFQ,GAEY,GAFZ,GAGR,IAAI,QAAJ,EAHQ,GAGS,GAHT,IAIN,IAAI,UAAJ,KAAmB,EAApB,GACM,MAAM,IAAI,UAAJ,EADZ,GAEM,IAAI,UAAJ,EANC,IAMoB,GANpB,IAON,IAAI,UAAJ,KAAmB,EAApB,GACM,MAAM,IAAI,UAAJ,EADZ,GAEM,IAAI,UAAJ,EATC,CAAR;AAUH,CAXM;;AAaP,IAAM,UAAU;AACZ,aAAS,KADG;AAEZ,WAAO,IAFK;AAGZ,UAAM,IAHM;AAIZ,WAAO;AAJK,CAAhB;;AAOO,IAAM,gCAAY,SAAZ,SAAY,CAAC,GAAD,EAAQ;AAC7B,YAAQ,GAAR,CAAY,GAAZ;AACH,CAFM;;AAIP,IAAM,YAAY,SAAZ,SAAY,GAAK;AACnB,WAAO,CAAC,CAAC,OAAO,SAAhB;AACH,CAFD;;AAIA,IAAM,kBAAkB,SAAlB,eAAkB,CAAC,GAAD,EAAQ;AAC5B,QAAI,IAAI,IAAJ,IAAY,MAAhB,EAAwB;AACpB,gBAAQ,GAAR,CAAY,SAAS,IAAI,UAAb,GAA0B,IAA1B,GAAiC,KAAjC,GAAyC,IAAI,OAA7C,GACR,GADJ,EACS,kCADT,EAC6C,mCAD7C;;AAGA,YAAI,IAAI,OAAR,EAAiB;AACb;AACA,gBAAI,gBAAgB,IAApB;;AAEA,mBAAO,IAAP,CAAY,IAAI,OAAhB,EAAyB,OAAzB,CAAiC,UAAC,GAAD,EAAQ;AACrC,iCAAiB,QAAQ,KAAR,GAAgB,GAAhB,GAAsB,IAAtB,GAA6B,IAAI,OAAJ,CAAY,GAAZ,CAA7B,GAAgD,KAAjE;AACH,aAFD;;AAIA,oBAAQ,GAAR,CAAY,gBAAgB,MAA5B,EAAoC,iBAApC;AACH;AACJ;;AAED,QAAI,IAAI,IAAJ,IAAY,OAAhB,EAAyB;AACrB,gBAAQ,GAAR,CAAY,SAAS,IAAI,UAAb,GAA0B,IAA1B,GAAiC,MAAjC,GAA0C,QAAQ,KAAlD,GAA0D,IAAI,OAA9D,GAAwE,GAApF,EACI,kCADJ,EACwC,kCADxC;;AAIA,YAAI,IAAI,OAAR,EAAiB;AACb,gBAAI,iBAAgB,IAApB;AACA,mBAAO,IAAP,CAAY,IAAI,OAAhB,EAAyB,OAAzB,CAAiC,UAAC,GAAD,EAAQ;AACrC,kCAAiB,QAAQ,KAAR,GAAgB,GAAhB,GAAsB,IAAtB,GAA6B,IAAI,OAAJ,CAAY,GAAZ,CAA7B,GAAgD,KAAjE;AACH,aAFD;AAGA,oBAAQ,GAAR,CAAY,iBAAgB,MAA5B,EAAoC,iBAApC;AACH;AACJ;;AAED,QAAI,IAAI,IAAJ,IAAY,SAAhB,EAA2B;AACvB,gBAAQ,GAAR,CAAY,SAAS,IAAI,UAAb,GAA0B,IAA1B,GAAiC,MAAjC,GAA0C,QAAQ,IAAlD,GAAyD,IAAI,OAA7D,GAAuE,GAAnF,EACI,kCADJ,EACwC,mCADxC;;AAIA,YAAI,IAAI,OAAR,EAAiB;AACb,gBAAI,kBAAgB,IAApB;AACA,mBAAO,IAAP,CAAY,IAAI,OAAhB,EAAyB,OAAzB,CAAiC,UAAC,GAAD,EAAQ;AACrC,mCAAiB,QAAQ,KAAR,GAAgB,GAAhB,GAAsB,IAAtB,GAA6B,IAAI,OAAJ,CAAY,GAAZ,CAA7B,GAAgD,KAAjE;AACH,aAFD;AAGA,oBAAQ,GAAR,CAAY,kBAAgB,MAA5B,EAAoC,iBAApC;AACH;AACJ;;AAED,QAAI,IAAI,IAAJ,IAAY,SAAhB,EAA2B;AACvB,gBAAQ,GAAR,CAAY,SAAS,IAAI,UAAb,GAA0B,IAA1B,GAAiC,MAAjC,GAA0C,QAAQ,OAAlD,GAA4D,IAAI,OAAhE,GAA0E,GAAtF,EACI,kCADJ,EACwC,mCADxC;;AAIA,YAAI,IAAI,OAAR,EAAiB;AACb,gBAAI,kBAAgB,IAApB;AACA,mBAAO,IAAP,CAAY,IAAI,OAAhB,EAAyB,OAAzB,CAAiC,UAAC,GAAD,EAAQ;AACrC,mCAAiB,QAAQ,KAAR,GAAgB,GAAhB,GAAsB,IAAtB,GAA6B,IAAI,OAAJ,CAAY,GAAZ,CAA7B,GAAgD,KAAjE;AACH,aAFD;AAGA,oBAAQ,GAAR,CAAY,kBAAgB,MAA5B,EAAoC,iBAApC;AACH;AACJ;AACJ,CA1DD;;AA4DA,IAAM,kBAAkB,SAAlB,eAAkB,CAAC,GAAD,EAAQ;AAC5B,YAAQ,GAAR,CAAY,IAAI,IAAJ,CAAS,WAAT,KAAyB,GAAzB,GAA+B,IAA/B,GAAsC,IAAI,UAA1C,GAAuD,KAAvD,GAA+D,IAAI,OAA/E;AACH,CAFD;;AAIO,IAAM,0BAAS,SAAT,MAAS,CAAC,GAAD,EAAQ;AAC1B,QAAI,WAAJ,EAAiB;AACb,wBAAgB,GAAhB;AACH,KAFD,MAEO;AACH,wBAAgB,GAAhB;AACH;AACJ,CANM;AAOA,IAAM,0CAAiB,SAAjB,cAAiB,CAAC,GAAD,EAAQ,CACrC,CADM;;;;;;;;;;ACnGA,IAAM,sBAAO,SAAP,IAAO,CAAC,SAAD,EAAY,IAAZ,EAAqB;AACrC,QAAI,MAAM,IAAI,cAAJ,EAAV;AACA,QAAI,kBAAJ,GAAyB,YAAY;AACjC,YAAI,KAAK,UAAL,IAAmB,CAAvB,EAA0B;;AAE1B,YAAI,KAAK,MAAL,IAAe,GAAnB,EAAwB;AACpB,oBAAQ,GAAR,CAAY,0BAAZ;AACH;AACJ,KAND;;AAQA,QAAI,WAAW,KAAK,SAAL,CAAe;AAC1B,oBAAY,KAAK,UADS;AAE1B,cAAM,KAAK,IAFe;AAG1B,iBAAS,KAAK,OAHY;AAI1B,iBAAS,KAAK,OAJY;AAK1B,mBAAW,KAAK,SALU;AAM1B,cAAM;AACF,oBAAQ,SAAS,QAAT,CAAkB,MADxB;AAEF,iBAAK,SAAS,QAAT,CAAkB;AAFrB;AANoB,KAAf,CAAf;;AAYA,QAAI,IAAJ,CAAS,MAAT,EAAiB,SAAjB,EAA4B,IAA5B;AACA,QAAI,gBAAJ,CAAqB,cAArB,EAAqC,gCAArC;AACA,QAAI,IAAJ,CAAS,QAAT;AACH,CAzBM;;;;;;;;;;;;;ACAP;;AACA;;;;AAGA,IAAM,kBAAkB,SAAlB,eAAkB,CAAC,IAAD,EAAS;AAC7B,QAAI,CAAC,IAAL,EAAW,OAAO,IAAP;;AAEX,WAAO,IAAP,CAAY,IAAZ,EAAkB,OAAlB,CAA0B,UAAC,GAAD,EAAQ;AAC9B,YAAI,KAAK,GAAL,aAAqB,QAAzB,EAAmC;AAC/B,kBAAM,IAAI,KAAJ,CAAU,qEAAV,CAAN;AACH;;AAED,YAAI,KAAK,GAAL,aAAqB,MAAzB,EAAiC;;AAE7B,mBAAO,IAAP,CAAY,KAAK,GAAL,CAAZ,EAAuB,OAAvB,CAA+B,UAAC,EAAD,EAAO;AAClC,oBAAI,KAAK,GAAL,EAAU,EAAV,aAAyB,MAA7B,EAAqC;AACjC,0BAAM,IAAI,KAAJ,CAAU,wDAAV,CAAN;AACH;;AAED,oBAAI,KAAK,GAAL,EAAU,EAAV,aAAyB,KAA7B,EAAoC;AAChC,0BAAM,IAAI,KAAJ,CAAU,wDAAV,CAAN;AACH;AACJ,aARD;AAWH;AACJ,KAnBD;AAoBH,CAvBD;;IAyBM,O;AACF,uBAAc;AAAA;;AACV,aAAK,KAAL,GAAa;AACT,0BAAc,KADL;AAET,uBAAW,KAFF;AAGT,uBAAW,KAHF;AAIT,kBAAM;AAJG,SAAb;;AAOA,aAAK,QAAL,GAAgB,EAAhB;AACH;;;;+BAEM,O,EAAS;AACZ,iBAAK,KAAL,GAAa,SAAc,KAAK,KAAnB,EAA0B,OAA1B,CAAb;AACH;;;8BAEK,M,EAAQ,I,EAAM,O,EAAS,O,EAAS,O,EAAS;AAC3C,4BAAgB,OAAhB;;AAEA,gBAAI,UAAU;AACV,4BAAY,MADF;AAEV,sBAAM,IAFI;AAGV,yBAAS,OAHC;AAIV,yBAAS,OAJC;AAKV,2BAAW,QAAQ;AALT,aAAd;;AAQA,iBAAK,QAAL,CAAc,IAAd,CAAmB,OAAnB;;AAEA,gBAAI,QAAQ,IAAR,IAAgB,KAApB,EAA2B;AACvB,uBAAO,KAAP;AACH;;AAED,gBAAM,YAAY,KAAK,KAAL,CAAW,SAA7B;;AAEA,gBAAI,aAAa,KAAK,KAAL,CAAW,IAA5B,EAAkC;AAC9B,mCAAK,SAAL,EAAgB,OAAhB;AACH;AACJ;;;iCAEQ,U,EAAY;AACjB,gBAAI,KAAK,KAAL,CAAW,YAAf,EAA6B;AACzB,wBAAQ,GAAR,CAAY,iDAAZ;AACA;AACA,uBAAO,KAAP;AACH;;AAED,gBAAI,UAAJ,EAAgB;AACZ,uBAAO,KAAK,QAAL,CAAc,MAAd,CAAqB,UAAC,GAAD,EAAQ;AAChC,2BAAQ,IAAI,UAAJ,IAAkB,UAA1B;AACH,iBAFM,CAAP;AAGH;;AAED,mBAAO,KAAK,QAAZ;AAEH;;;;;;kBAGU,IAAI,OAAJ,E;;;;;;;;;;;ACvFf;;;;AACA;;AACA;;;;;;IAEqB,M;AACjB,oBAAY,IAAZ,EAAkB,IAAlB,EAAwB;AAAA;;AACpB,YAAM,cAAc,cAAO,SAAP,CAAiB,IAAjB,CAApB;;AAEA,YAAI,WAAJ,EAAiB;AACb,iBAAK,KAAL,GAAa,IAAb;AACH;;AAED,aAAK,OAAL,GAAe,IAAf;AACA,aAAK,IAAL,GAAY,IAAZ;AACH;;;;6BAEI,O,EAAS,O,EAAS;AACnB,8BAAQ,KAAR,CAAc,KAAK,IAAnB,EAAyB,MAAzB,EAAiC,OAAjC,EAA0C,OAA1C,EAAmD,KAAK,OAAxD;;AAEA,gBAAI,KAAK,OAAL,CAAa,KAAjB,EAAwB;AACpB,oCAAO;AACH,gCAAY,KAAK,IADd;AAEH,6BAAS,OAFN;AAGH,6BAAS,OAHN;AAIH,0BAAM;AAJH,iBAAP;AAMH;AACJ;;;gCAEO,O,EAAS,O,EAAS;AACtB,8BAAQ,KAAR,CAAc,KAAK,IAAnB,EAAyB,SAAzB,EAAoC,OAApC,EAA6C,OAA7C,EAAsD,KAAK,OAA3D;;AAEA,gBAAI,KAAK,OAAL,CAAa,KAAjB,EAAwB;AACpB,oCAAO;AACH,gCAAY,KAAK,IADd;AAEH,6BAAS,OAFN;AAGH,6BAAS,OAHN;AAIH,0BAAM;AAJH,iBAAP;AAMH;AACJ;;;gCAEO,O,EAAS,O,EAAS;AACtB,8BAAQ,KAAR,CAAc,KAAK,IAAnB,EAAyB,SAAzB,EAAoC,OAApC,EAA6C,OAA7C,EAAsD,KAAK,OAA3D;;AAEA,gBAAI,KAAK,OAAL,CAAa,KAAjB,EAAwB;AACpB,oCAAO;AACH,gCAAY,KAAK,IADd;AAEH,6BAAS,OAFN;AAGH,6BAAS,OAHN;AAIH,0BAAM;AAJH,iBAAP;AAMH;AACJ;;;8BAEK,O,EAAS,O,EAAS;AACpB,8BAAQ,KAAR,CAAc,KAAK,IAAnB,EAAyB,OAAzB,EAAkC,OAAlC,EAA2C,OAA3C,EAAoD,KAAK,OAAzD;;AAEA,gBAAI,KAAK,OAAL,CAAa,KAAjB,EAAwB;AACpB,oCAAO;AACH,gCAAY,KAAK,IADd;AAEH,6BAAS,OAFN;AAGH,6BAAS,OAHN;AAIH,0BAAM;AAJH,iBAAP;AAMH;AACJ;;;8BAEK,I,EAAM;AACR,gBAAI,gBAAgB,kBAAQ,QAAR,CAAiB,KAAK,IAAtB,CAApB;;AAEA,0BAAc,OAAd,CAAsB,UAAC,GAAD,EAAQ;AAC1B,oCAAO,GAAP;AACH,aAFD;AAGH;;;8BAGK,I,EAAM;AACR,gBAAI,KAAK,KAAT,EAAgB;AACZ,8BAAO,YAAP,CAAoB,KAAK,IAAL,IAAa,KAAjC,EAAwC,OAAxC;AACH,aAFD,MAEO;AACH,8BAAO,YAAP,CAAoB,KAAK,IAAL,IAAa,KAAjC;AACH;AACJ;;;;;;kBA/EgB,M;;;;;;;;ACJd,IAAM,0BAAS;AAClB,kBAAc,sBAAU,IAAV,EAAgB,KAAhB,EAAuB,UAAvB,EAAmC;AAC7C,qBAAa,CAAC,CAAC,UAAF,GAAe,UAAf,GAA6B,KAAK,EAAL,GAAU,IAApD,CAD6C,CACc;AAC3D,YAAI,OAAO,IAAI,IAAJ,EAAX;AACA,aAAK,OAAL,CAAa,KAAK,OAAL,KAAiB,UAA9B;AACA,YAAI,UAAU,eAAe,KAAK,WAAL,EAA7B;AACA,iBAAS,MAAT,GAAkB,OAAO,GAAP,GAAa,KAAb,GAAqB,OAArB,GAA+B,UAAjD;AACH,KAPiB;AAQlB,eAAW,mBAAU,IAAV,EAAgB;AACvB,YAAI,QAAQ,OAAO,SAAS,MAA5B;AACA,YAAI,QAAQ,MAAM,KAAN,CAAY,OAAO,IAAP,GAAc,GAA1B,CAAZ;AACA,YAAI,MAAM,MAAN,IAAgB,CAApB,EAAuB;AACnB,mBAAO,MAAM,GAAN,GAAY,KAAZ,CAAkB,GAAlB,EAAuB,KAAvB,EAAP;AACH;AACJ,KAdiB;AAelB,kBAAc,sBAAU,IAAV,EAAgB;AAC1B,iBAAS,MAAT,GAAkB,OAAO,mDAAzB;AACH;AAjBiB,CAAf;;;;;;;;qjBCAP;;;;;;;AAOA;;;;AACA;;;;AACA;;AACA;;;;;;IAEM,M;AACF,sBAAc;AAAA;;AACV,aAAK,OAAL,GAAe,EAAf;AACA,aAAK,OAAL,GAAe;AACX,mBAAO,KADI;AAEX,oBAAQ,IAFG;AAGX,uBAAW,KAHA;AAIX,kBAAM,IAJK;AAKX,oBAAQ,KALG;AAMX,uBAAW;AANA,SAAf;;AASA,aAAK,KAAL,GAAa;AACT,iBAAK,aAAC,IAAD,EAAS;AACV,oBAAI,aAAa,kBAAQ,QAAR,EAAjB;;AAEA,2BAAW,OAAX,CAAmB,UAAC,OAAD,EAAY;AAC3B,wCAAO,OAAP;AACH,iBAFD;AAGH;AAPQ,SAAb;;AAUA,aAAK,KAAL,GAAa;AACT,iBAAK,aAAC,IAAD,EAAS;AACV,oBAAI,KAAK,KAAT,EAAgB;AACZ,kCAAO,YAAP,CAAoB,KAApB,EAA2B,OAA3B;AACH,iBAFD,MAEO;AACH,kCAAO,YAAP,CAAoB,KAApB;AACH;AAGJ;AATQ,SAAb;AAWH;;;;+BAEM,I,EAAM;AACT,iBAAK,OAAL,GAAe,SAAc,EAAd,EAAkB,KAAK,OAAvB,EAAgC,IAAhC,CAAf;AACA,8BAAQ,MAAR,CAAe,KAAK,OAApB;AACH;;;6BAEI,U,EAAY,I,EAAM;AACnB,gBAAI,OAAO,UAAP,IAAqB,QAAzB,EAAmC;AAC/B,sBAAM,IAAI,KAAJ,CAAU,6DAAV,CAAN;AACH;;AAED,gBAAK,CAAC,IAAD,YAAiB,MAAtB,EAA+B;AAC3B,sBAAM,IAAI,KAAJ,CAAU,0DAAV,CAAN;AACH;;AAED,gBAAI,UAAU,SAAc,EAAd,EAAkB,KAAK,OAAvB,EAAgC,IAAhC,CAAd;AACA,gBAAI,cAAc,WAAW,IAAX,GAAkB,OAAlB,CAA0B,MAA1B,EAAkC,GAAlC,CAAlB;;AAGA,gBAAM,YAAY,IAAlB;;AAEA,gBAAI,CAAC,UAAU,OAAV,CAAkB,WAAlB,CAAL,EAAqC;AACjC,oBAAM,UAAS,qBAAkB,WAAlB,EAA+B,OAA/B,CAAf;AACA,0BAAU,OAAV,CAAkB,WAAlB,IAAiC,OAAjC;AACA,qBAAK,KAAL,CAAW,WAAX,IAA0B,QAAO,KAAP,CAAa,IAAb,CAAkB,OAAlB,CAA1B;AACA,qBAAK,KAAL,CAAW,WAAX,IAA0B,QAAO,KAAP,CAAa,IAAb,CAAkB,OAAlB,CAA1B;AACA,uBAAO,OAAP;AAEH,aAPD,MAOO;AACH,sBAAM,IAAI,KAAJ,CAAU,sDAAV,CAAN;AACH;AACJ;;;;;;AAGL,IAAI,OAAO,MAAX,EAAmB;AACf,QAAI,CAAC,OAAO,MAAZ,EAAoB;AAChB,eAAO,MAAP,GAAgB,IAAI,MAAJ,EAAhB;AACH;AACJ;;AAED,OAAO,OAAP,GAAiB,IAAI,MAAJ,EAAjB","file":"build.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","export const getTimeStamp = (date)=> {\n    return ((now.getMonth() + 1) + '/' +\n    (now.getDate()) + '/' +\n    now.getFullYear() + \" \" +\n    now.getHours() + ':' +\n    ((now.getMinutes() < 10)\n        ? (\"0\" + now.getMinutes())\n        : (now.getMinutes())) + ':' +\n    ((now.getSeconds() < 10)\n        ? (\"0\" + now.getSeconds())\n        : (now.getSeconds())));\n};\n\nconst symbols = {\n    success: '✔︎ ',\n    error: '✘ ',\n    warn: '⚑ ',\n    arrow: '➤ '\n};\n\nexport const rawRender = (log)=> {\n    console.log(log);\n};\n\nconst isBrowser = ()=> {\n    return !!global.Navigator;\n};\n\nconst renderInBrowser = (log)=> {\n    if (log.type == \"info\") {\n        console.log('%c [' + log.moduleName + \"] \" + '%c ' + log.message +\n            ' ', 'background: #24292e; color: #FFF', ' color: #fff; background: #8a939a');\n\n        if (log.details) {\n            // console.log('%c Details: ', 'background: #e5e5e5; color: #666');\n            let detailsString = '%c';\n\n            Object.keys(log.details).forEach((key)=> {\n                detailsString += symbols.arrow + key + \": \" + log.details[key] + \" \\n\";\n            });\n\n            console.log(detailsString + '\\n\\n', ' color: #8a939a');\n        }\n    }\n\n    if (log.type == \"error\") {\n        console.log('%c [' + log.moduleName + \"] \" + ' %c ' + symbols.error + log.message + ' ',\n            'background: #24292e; color: #FFF', 'background: #b90000; color: #fff');\n\n\n        if (log.details) {\n            let detailsString = '%c';\n            Object.keys(log.details).forEach((key)=> {\n                detailsString += symbols.arrow + key + \": \" + log.details[key] + \" \\n\";\n            });\n            console.log(detailsString + '\\n\\n', ' color: #b90000');\n        }\n    }\n\n    if (log.type == \"warning\") {\n        console.log('%c [' + log.moduleName + \"] \" + ' %c ' + symbols.warn + log.message + ' ',\n            'background: #24292e; color: #FFF', 'background: #bf7121; color: #fff;');\n\n\n        if (log.details) {\n            let detailsString = '%c';\n            Object.keys(log.details).forEach((key)=> {\n                detailsString += symbols.arrow + key + \": \" + log.details[key] + \" \\n\";\n            });\n            console.log(detailsString + '\\n\\n', ' color: #bf7121');\n        }\n    }\n\n    if (log.type == \"success\") {\n        console.log('%c [' + log.moduleName + \"] \" + ' %c ' + symbols.success + log.message + ' ',\n            'background: #24292e; color: #FFF', 'background: #1a9635; color: #fff;');\n\n\n        if (log.details) {\n            let detailsString = '%c';\n            Object.keys(log.details).forEach((key)=> {\n                detailsString += symbols.arrow + key + \": \" + log.details[key] + \" \\n\";\n            });\n            console.log(detailsString + '\\n\\n', ' color: #1a9635');\n        }\n    }\n};\n\nconst renderInConsole = (log)=> {\n    console.log(log.type.toUpperCase() + \":\" + \"[ \" + log.moduleName + \" ] \" + log.message);\n};\n\nexport const render = (log)=> {\n    if (isBrowser()) {\n        renderInBrowser(log);\n    } else {\n        renderInConsole(log);\n    }\n};\nexport const renderWithTime = (log)=> {\n};","export const send = (serverUrl, data) => {\n    var xhr = new XMLHttpRequest();\n    xhr.onreadystatechange = function () {\n        if (this.readyState != 4) return;\n\n        if (this.status != 200) {\n            console.log(\"OutLog: connection error\");\n        }\n    };\n\n    var jsonData = JSON.stringify({\n        moduleName: data.moduleName,\n        type: data.type,\n        message: data.message,\n        details: data.details,\n        publicKey: data.publicKey,\n        meta: {\n            domain: document.location.origin,\n            url: document.location.href\n        }\n    });\n\n    xhr.open(\"POST\", serverUrl, true);\n    xhr.setRequestHeader(\"Content-Type\", \"application/json;charset=UTF-8\");\n    xhr.send(jsonData);\n};","import {getTimeStamp} from '../helpers/format'\nimport {send} from '../helpers/request'\n\n\nconst checkLogDetails = (data)=> {\n    if (!data) return true;\n\n    Object.keys(data).forEach((key)=> {\n        if (data[key] instanceof Function) {\n            throw new Error(\"Outlog: You can't pass multidimensional data to logger or functions\");\n        }\n\n        if (data[key] instanceof Object) {\n\n            Object.keys(data[key]).forEach((k2)=> {\n                if (data[key][k2] instanceof Object) {\n                    throw new Error(\"Outlog: You can't pass multidimensional data to logger\");\n                }\n\n                if (data[key][k2] instanceof Array) {\n                    throw new Error(\"Outlog: You can't pass multidimensional data to logger\");\n                }\n            });\n\n\n        }\n    });\n};\n\nclass History {\n    constructor() {\n        this.state = {\n            localStorage: false,\n            timeStamp: false,\n            serverUrl: false,\n            sync: true\n        };\n\n        this.messages = [];\n    }\n\n    config(options) {\n        this.state = Object.assign(this.state, options);\n    }\n\n    write(module, type, message, details, options) {\n        checkLogDetails(details);\n\n        let logData = {\n            moduleName: module,\n            type: type,\n            message: message,\n            details: details,\n            publicKey: options.publicKey\n        };\n\n        this.messages.push(logData);\n\n        if (options.sync == false) {\n            return false;\n        }\n\n        const serverUrl = this.state.serverUrl;\n\n        if (serverUrl && this.state.sync) {\n            send(serverUrl, logData);\n        }\n    }\n\n    getTrace(moduleName) {\n        if (this.state.localStorage) {\n            console.log(\"read all from local storage [ not implemented ]\");\n            // return localstorage trace\n            return false;\n        }\n\n        if (moduleName) {\n            return this.messages.filter((msg)=> {\n                return (msg.moduleName == moduleName);\n            });\n        }\n\n        return this.messages;\n\n    }\n}\n\nexport default new History();","import History from './history'\nimport {render} from '../helpers/format'\nimport {Cookie} from '../lib/utils'\n\nexport default class Module {\n    constructor(name, opts) {\n        const debugCookie = Cookie.getCookie(name);\n\n        if (debugCookie) {\n            opts.debug = true;\n        }\n\n        this.options = opts;\n        this.name = name;\n    }\n\n    info(message, details) {\n        History.write(this.name, \"info\", message, details, this.options);\n\n        if (this.options.debug) {\n            render({\n                moduleName: this.name,\n                message: message,\n                details: details,\n                type: \"info\"\n            });\n        }\n    }\n\n    warning(message, details) {\n        History.write(this.name, \"warning\", message, details, this.options);\n\n        if (this.options.debug) {\n            render({\n                moduleName: this.name,\n                message: message,\n                details: details,\n                type: \"warning\"\n            });\n        }\n    }\n\n    success(message, details) {\n        History.write(this.name, \"success\", message, details, this.options);\n\n        if (this.options.debug) {\n            render({\n                moduleName: this.name,\n                message: message,\n                details: details,\n                type: \"success\"\n            });\n        }\n    }\n\n    error(message, details) {\n        History.write(this.name, \"error\", message, details, this.options);\n\n        if (this.options.debug) {\n            render({\n                moduleName: this.name,\n                message: message,\n                details: details,\n                type: \"error\"\n            });\n        }\n    }\n\n    trace(args) {\n        let moduleHistory = History.getTrace(this.name);\n\n        moduleHistory.forEach((log)=> {\n            render(log);\n        });\n    }\n\n\n    print(args) {\n        if (args.debug) {\n            Cookie.createCookie(this.name || \"all\", \"debug\");\n        } else {\n            Cookie.deleteCookie(this.name || \"all\");\n        }\n    }\n}\n\n","export const Cookie = {\n    createCookie: function (name, value, expireTime) {\n        expireTime = !!expireTime ? expireTime : (15 * 60 * 1000); // Default 15 min\n        var date = new Date();\n        date.setTime(date.getTime() + expireTime);\n        var expires = \"; expires=\" + date.toGMTString();\n        document.cookie = name + \"=\" + value + expires + \"; path=/\";\n    },\n    getCookie: function (name) {\n        var value = \"; \" + document.cookie;\n        var parts = value.split(\"; \" + name + \"=\");\n        if (parts.length == 2) {\n            return parts.pop().split(\";\").shift();\n        }\n    },\n    deleteCookie: function (name) {\n        document.cookie = name + '=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';\n    }\n};","/*\n * @author Alex Clever <axclever@gmail.com>\n *\n *  Outlog Library\n *\n * */\n\nimport ModuleFactory from './lib/module'\nimport History from './lib/history'\nimport {render} from './helpers/format'\nimport {Cookie} from './lib/utils'\n\nclass Outlog {\n    constructor() {\n        this.modules = {};\n        this.options = {\n            debug: false,\n            colors: true,\n            serverUrl: false,\n            sync: true,\n            memory: false,\n            publicKey: null\n        };\n\n        this.trace = {\n            all: (args)=> {\n                let allHistory = History.getTrace();\n\n                allHistory.forEach((message)=> {\n                    render(message);\n                });\n            }\n        };\n\n        this.print = {\n            all: (args)=> {\n                if (args.debug) {\n                    Cookie.createCookie(\"all\", \"debug\");\n                } else {\n                    Cookie.deleteCookie(\"all\");\n                }\n\n\n            }\n        };\n    }\n\n    config(args) {\n        this.options = Object.assign({}, this.options, args);\n        History.config(this.options);\n    }\n\n    init(moduleName, args) {\n        if (typeof moduleName != 'string') {\n            throw new Error(\"init method: wrong parameter 'moduleName'. Should be string\");\n        }\n\n        if ((!args instanceof Object)) {\n            throw new Error(\"init method: wrong parameter 'args'. Should be an object\");\n        }\n\n        let options = Object.assign({}, this.options, args);\n        let trimmedName = moduleName.trim().replace(/\\ /ig, \"_\");\n\n\n        const component = this;\n\n        if (!component.modules[trimmedName]) {\n            const module = new ModuleFactory(trimmedName, options);\n            component.modules[trimmedName] = module;\n            this.trace[trimmedName] = module.trace.bind(module);\n            this.print[trimmedName] = module.print.bind(module);\n            return module;\n\n        } else {\n            throw new Error(\"Outlog Error: module already exist, use another name\");\n        }\n    }\n}\n\nif (global.window) {\n    if (!window.Outlog) {\n        window.Outlog = new Outlog();\n    }\n}\n\nmodule.exports = new Outlog();\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvaGVscGVycy9mb3JtYXQuanMiLCJzcmMvaGVscGVycy9yZXF1ZXN0LmpzIiwic3JjL2xpYi9oaXN0b3J5LmpzIiwic3JjL2xpYi9tb2R1bGUuanMiLCJzcmMvbGliL3V0aWxzLmpzIiwic3JjL291dGxvZy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7OztBQ0FPLElBQU0sc0NBQWUsU0FBZixZQUFlLENBQUMsSUFBRCxFQUFTO0FBQ2pDLFdBQVMsSUFBSSxRQUFKLEtBQWlCLENBQWxCLEdBQXVCLEdBQXZCLEdBQ1AsSUFBSSxPQUFKLEVBRE8sR0FDVSxHQURWLEdBRVIsSUFBSSxXQUFKLEVBRlEsR0FFWSxHQUZaLEdBR1IsSUFBSSxRQUFKLEVBSFEsR0FHUyxHQUhULElBSU4sSUFBSSxVQUFKLEtBQW1CLEVBQXBCLEdBQ00sTUFBTSxJQUFJLFVBQUosRUFEWixHQUVNLElBQUksVUFBSixFQU5DLElBTW9CLEdBTnBCLElBT04sSUFBSSxVQUFKLEtBQW1CLEVBQXBCLEdBQ00sTUFBTSxJQUFJLFVBQUosRUFEWixHQUVNLElBQUksVUFBSixFQVRDLENBQVI7QUFVSCxDQVhNOztBQWFQLElBQU0sVUFBVTtBQUNaLGFBQVMsS0FERztBQUVaLFdBQU8sSUFGSztBQUdaLFVBQU0sSUFITTtBQUlaLFdBQU87QUFKSyxDQUFoQjs7QUFPTyxJQUFNLGdDQUFZLFNBQVosU0FBWSxDQUFDLEdBQUQsRUFBUTtBQUM3QixZQUFRLEdBQVIsQ0FBWSxHQUFaO0FBQ0gsQ0FGTTs7QUFJUCxJQUFNLFlBQVksU0FBWixTQUFZLEdBQUs7QUFDbkIsV0FBTyxDQUFDLENBQUMsT0FBTyxTQUFoQjtBQUNILENBRkQ7O0FBSUEsSUFBTSxrQkFBa0IsU0FBbEIsZUFBa0IsQ0FBQyxHQUFELEVBQVE7QUFDNUIsUUFBSSxJQUFJLElBQUosSUFBWSxNQUFoQixFQUF3QjtBQUNwQixnQkFBUSxH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TjtBQUNIOztBQUVELGdCQUFJLFVBQVUsU0FBYyxFQUFkLEVBQWtCLEtBQUssT0FBdkIsRUFBZ0MsSUFBaEMsQ0FBZDtBQUNBLGdCQUFJLGNBQWMsV0FBVyxJQUFYLEdBQWtCLE9BQWxCLENBQTBCLE1BQTFCLEVBQWtDLEdBQWxDLENBQWxCOztBQUdBLGdCQUFNLFlBQVksSUFBbEI7O0FBRUEsZ0JBQUksQ0FBQyxVQUFVLE9BQVYsQ0FBa0IsV0FBbEIsQ0FBTCxFQUFxQztBQUNqQyxvQkFBTSxVQUFTLHFCQUFrQixXQUFsQixFQUErQixPQUEvQixDQUFmO0FBQ0EsMEJBQVUsT0FBVixDQUFrQixXQUFsQixJQUFpQyxPQUFqQztBQUNBLHFCQUFLLEtBQUwsQ0FBVyxXQUFYLElBQTBCLFFBQU8sS0FBUCxDQUFhLElBQWIsQ0FBa0IsT0FBbEIsQ0FBMUI7QUFDQSxxQkFBSyxLQUFMLENBQVcsV0FBWCxJQUEwQixRQUFPLEtBQVAsQ0FBYSxJQUFiLENBQWtCLE9BQWxCLENBQTFCO0FBQ0EsdUJBQU8sT0FBUDtBQUVILGFBUEQsTUFPTztBQUNILHNCQUFNLElBQUksS0FBSixDQUFVLHNEQUFWLENBQU47QUFDSDtBQUNKOzs7Ozs7QUFHTCxJQUFJLE9BQU8sTUFBWCxFQUFtQjtBQUNmLFFBQUksQ0FBQyxPQUFPLE1BQVosRUFBb0I7QUFDaEIsZUFBTyxNQUFQLEdBQWdCLElBQUksTUFBSixFQUFoQjtBQUNIO0FBQ0o7O0FBRUQsT0FBTyxPQUFQLEdBQWlCLElBQUksTUFBSixFQUFqQiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJleHBvcnQgY29uc3QgZ2V0VGltZVN0YW1wID0gKGRhdGUpPT4ge1xuICAgIHJldHVybiAoKG5vdy5nZXRNb250aCgpICsgMSkgKyAnLycgK1xuICAgIChub3cuZ2V0RGF0ZSgpKSArICcvJyArXG4gICAgbm93LmdldEZ1bGxZZWFyKCkgKyBcIiBcIiArXG4gICAgbm93LmdldEhvdXJzKCkgKyAnOicgK1xuICAgICgobm93LmdldE1pbnV0ZXMoKSA8IDEwKVxuICAgICAgICA/IChcIjBcIiArIG5vdy5nZXRNaW51dGVzKCkpXG4gICAgICAgIDogKG5vdy5nZXRNaW51dGVzKCkpKSArICc6JyArXG4gICAgKChub3cuZ2V0U2Vjb25kcygpIDwgMTApXG4gICAgICAgID8gKFwiMFwiICsgbm93LmdldFNlY29uZHMoKSlcbiAgICAgICAgOiAobm93LmdldFNlY29uZHMoKSkpKTtcbn07XG5cbmNvbnN0IHN5bWJvbHMgPSB7XG4gICAgc3VjY2VzczogJ+KclO+4jiAnLFxuICAgIGVycm9yOiAn4pyYICcsXG4gICAgd2FybjogJ+KakSAnLFxuICAgIGFycm93OiAn4p6kICdcbn07XG5cbmV4cG9ydCBjb25zdCByYXdSZW5kZXIgPSAobG9nKT0+IHtcbiAgICBjb25zb2xlLmxvZyhsb2cpO1xufTtcblxuY29uc3QgaXNCcm93c2VyID0gKCk9PiB7XG4gICAgcmV0dXJuICEhZ2xvYmFsLk5hdmlnYXRvcjtcbn07XG5cbmNvbnN0IHJlbmRlckluQnJvd3NlciA9IChsb2cpPT4ge1xuICAgIGlmIChsb2cudHlwZSA9PSBcImluZm9cIikge1xuICAgICAgICBjb25zb2xlLmxvZygnJWMgWycgKyBsb2cubW9kdWxlTmFtZSArIFwiXSBcIiArICclYyAnICsgbG9nLm1lc3NhZ2UgK1xuICAgICAgICAgICAgJyAnLCAnYmFja2dyb3VuZDogIzI0MjkyZTsgY29sb3I6ICNGRkYnLCAnIGNvbG9yOiAjZmZmOyBiYWNrZ3JvdW5kOiAjOGE5MzlhJyk7XG5cbiAgICAgICAgaWYgKGxvZy5kZXRhaWxzKSB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnJWMgRGV0YWlsczogJywgJ2JhY2tncm91bmQ6ICNlNWU1ZTU7IGNvbG9yOiAjNjY2Jyk7XG4gICAgICAgICAgICBsZXQgZGV0YWlsc1N0cmluZyA9ICclYyc7XG5cbiAgICAgICAgICAgIE9iamVjdC5rZXlzKGxvZy5kZXRhaWxzKS5mb3JFYWNoKChrZXkpPT4ge1xuICAgICAgICAgICAgICAgIGRldGFpbHNTdHJpbmcgKz0gc3ltYm9scy5hcnJvdyArIGtleSArIFwiOiBcIiArIGxvZy5kZXRhaWxzW2tleV0gKyBcIiBcXG5cIjtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkZXRhaWxzU3RyaW5nICsgJ1xcblxcbicsICcgY29sb3I6ICM4YTkzOWEnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChsb2cudHlwZSA9PSBcImVycm9yXCIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJyVjIFsnICsgbG9nLm1vZHVsZU5hbWUgKyBcIl0gXCIgKyAnICVjICcgKyBzeW1ib2xzLmVycm9yICsgbG9nLm1lc3NhZ2UgKyAnICcsXG4gICAgICAgICAgICAnYmFja2dyb3VuZDogIzI0MjkyZTsgY29sb3I6ICNGRkYnLCAnYmFja2dyb3VuZDogI2I5MDAwMDsgY29sb3I6ICNmZmYnKTtcblxuXG4gICAgICAgIGlmIChsb2cuZGV0YWlscykge1xuICAgICAgICAgICAgbGV0IGRldGFpbHNTdHJpbmcgPSAnJWMnO1xuICAgICAgICAgICAgT2JqZWN0LmtleXMobG9nLmRldGFpbHMpLmZvckVhY2goKGtleSk9PiB7XG4gICAgICAgICAgICAgICAgZGV0YWlsc1N0cmluZyArPSBzeW1ib2xzLmFycm93ICsga2V5ICsgXCI6IFwiICsgbG9nLmRldGFpbHNba2V5XSArIFwiIFxcblwiO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkZXRhaWxzU3RyaW5nICsgJ1xcblxcbicsICcgY29sb3I6ICNiOTAwMDAnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChsb2cudHlwZSA9PSBcIndhcm5pbmdcIikge1xuICAgICAgICBjb25zb2xlLmxvZygnJWMgWycgKyBsb2cubW9kdWxlTmFtZSArIFwiXSBcIiArICcgJWMgJyArIHN5bWJvbHMud2FybiArIGxvZy5tZXNzYWdlICsgJyAnLFxuICAgICAgICAgICAgJ2JhY2tncm91bmQ6ICMyNDI5MmU7IGNvbG9yOiAjRkZGJywgJ2JhY2tncm91bmQ6ICNiZjcxMjE7IGNvbG9yOiAjZmZmOycpO1xuXG5cbiAgICAgICAgaWYgKGxvZy5kZXRhaWxzKSB7XG4gICAgICAgICAgICBsZXQgZGV0YWlsc1N0cmluZyA9ICclYyc7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhsb2cuZGV0YWlscykuZm9yRWFjaCgoa2V5KT0+IHtcbiAgICAgICAgICAgICAgICBkZXRhaWxzU3RyaW5nICs9IHN5bWJvbHMuYXJyb3cgKyBrZXkgKyBcIjogXCIgKyBsb2cuZGV0YWlsc1trZXldICsgXCIgXFxuXCI7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRldGFpbHNTdHJpbmcgKyAnXFxuXFxuJywgJyBjb2xvcjogI2JmNzEyMScpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGxvZy50eXBlID09IFwic3VjY2Vzc1wiKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCclYyBbJyArIGxvZy5tb2R1bGVOYW1lICsgXCJdIFwiICsgJyAlYyAnICsgc3ltYm9scy5zdWNjZXNzICsgbG9nLm1lc3NhZ2UgKyAnICcsXG4gICAgICAgICAgICAnYmFja2dyb3VuZDogIzI0MjkyZTsgY29sb3I6ICNGRkYnLCAnYmFja2dyb3VuZDogIzFhOTYzNTsgY29sb3I6ICNmZmY7Jyk7XG5cblxuICAgICAgICBpZiAobG9nLmRldGFpbHMpIHtcbiAgICAgICAgICAgIGxldCBkZXRhaWxzU3RyaW5nID0gJyVjJztcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKGxvZy5kZXRhaWxzKS5mb3JFYWNoKChrZXkpPT4ge1xuICAgICAgICAgICAgICAgIGRldGFpbHNTdHJpbmcgKz0gc3ltYm9scy5hcnJvdyArIGtleSArIFwiOiBcIiArIGxvZy5kZXRhaWxzW2tleV0gKyBcIiBcXG5cIjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coZGV0YWlsc1N0cmluZyArICdcXG5cXG4nLCAnIGNvbG9yOiAjMWE5NjM1Jyk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5jb25zdCByZW5kZXJJbkNvbnNvbGUgPSAobG9nKT0+IHtcbiAgICBjb25zb2xlLmxvZyhsb2cudHlwZS50b1VwcGVyQ2FzZSgpICsgXCI6XCIgKyBcIlsgXCIgKyBsb2cubW9kdWxlTmFtZSArIFwiIF0gXCIgKyBsb2cubWVzc2FnZSk7XG59O1xuXG5leHBvcnQgY29uc3QgcmVuZGVyID0gKGxvZyk9PiB7XG4gICAgaWYgKGlzQnJvd3NlcigpKSB7XG4gICAgICAgIHJlbmRlckluQnJvd3Nlcihsb2cpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJlbmRlckluQ29uc29sZShsb2cpO1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgcmVuZGVyV2l0aFRpbWUgPSAobG9nKT0+IHtcbn07IiwiZXhwb3J0IGNvbnN0IHNlbmQgPSAoc2VydmVyVXJsLCBkYXRhKSA9PiB7XG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgIT0gNCkgcmV0dXJuO1xuXG4gICAgICAgIGlmICh0aGlzLnN0YXR1cyAhPSAyMDApIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiT3V0TG9nOiBjb25uZWN0aW9uIGVycm9yXCIpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBqc29uRGF0YSA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbW9kdWxlTmFtZTogZGF0YS5tb2R1bGVOYW1lLFxuICAgICAgICB0eXBlOiBkYXRhLnR5cGUsXG4gICAgICAgIG1lc3NhZ2U6IGRhdGEubWVzc2FnZSxcbiAgICAgICAgZGV0YWlsczogZGF0YS5kZXRhaWxzLFxuICAgICAgICBwdWJsaWNLZXk6IGRhdGEucHVibGljS2V5LFxuICAgICAgICBtZXRhOiB7XG4gICAgICAgICAgICBkb21haW46IGRvY3VtZW50LmxvY2F0aW9uLm9yaWdpbixcbiAgICAgICAgICAgIHVybDogZG9jdW1lbnQubG9jYXRpb24uaHJlZlxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICB4aHIub3BlbihcIlBPU1RcIiwgc2VydmVyVXJsLCB0cnVlKTtcbiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiKTtcbiAgICB4aHIuc2VuZChqc29uRGF0YSk7XG59OyIsImltcG9ydCB7Z2V0VGltZVN0YW1wfSBmcm9tICcuLi9oZWxwZXJzL2Zvcm1hdCdcbmltcG9ydCB7c2VuZH0gZnJvbSAnLi4vaGVscGVycy9yZXF1ZXN0J1xuXG5cbmNvbnN0IGNoZWNrTG9nRGV0YWlscyA9IChkYXRhKT0+IHtcbiAgICBpZiAoIWRhdGEpIHJldHVybiB0cnVlO1xuXG4gICAgT2JqZWN0LmtleXMoZGF0YSkuZm9yRWFjaCgoa2V5KT0+IHtcbiAgICAgICAgaWYgKGRhdGFba2V5XSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPdXRsb2c6IFlvdSBjYW4ndCBwYXNzIG11bHRpZGltZW5zaW9uYWwgZGF0YSB0byBsb2dnZXIgb3IgZnVuY3Rpb25zXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRhdGFba2V5XSBpbnN0YW5jZW9mIE9iamVjdCkge1xuXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhkYXRhW2tleV0pLmZvckVhY2goKGsyKT0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YVtrZXldW2syXSBpbnN0YW5jZW9mIE9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPdXRsb2c6IFlvdSBjYW4ndCBwYXNzIG11bHRpZGltZW5zaW9uYWwgZGF0YSB0byBsb2dnZXJcIik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGRhdGFba2V5XVtrMl0gaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPdXRsb2c6IFlvdSBjYW4ndCBwYXNzIG11bHRpZGltZW5zaW9uYWwgZGF0YSB0byBsb2dnZXJcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5jbGFzcyBIaXN0b3J5IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZTogZmFsc2UsXG4gICAgICAgICAgICB0aW1lU3RhbXA6IGZhbHNlLFxuICAgICAgICAgICAgc2VydmVyVXJsOiBmYWxzZSxcbiAgICAgICAgICAgIHN5bmM6IHRydWVcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm1lc3NhZ2VzID0gW107XG4gICAgfVxuXG4gICAgY29uZmlnKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IE9iamVjdC5hc3NpZ24odGhpcy5zdGF0ZSwgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgd3JpdGUobW9kdWxlLCB0eXBlLCBtZXNzYWdlLCBkZXRhaWxzLCBvcHRpb25zKSB7XG4gICAgICAgIGNoZWNrTG9nRGV0YWlscyhkZXRhaWxzKTtcblxuICAgICAgICBsZXQgbG9nRGF0YSA9IHtcbiAgICAgICAgICAgIG1vZHVsZU5hbWU6IG1vZHVsZSxcbiAgICAgICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgICAgZGV0YWlsczogZGV0YWlscyxcbiAgICAgICAgICAgIHB1YmxpY0tleTogb3B0aW9ucy5wdWJsaWNLZXlcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm1lc3NhZ2VzLnB1c2gobG9nRGF0YSk7XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuc3luYyA9PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc2VydmVyVXJsID0gdGhpcy5zdGF0ZS5zZXJ2ZXJVcmw7XG5cbiAgICAgICAgaWYgKHNlcnZlclVybCAmJiB0aGlzLnN0YXRlLnN5bmMpIHtcbiAgICAgICAgICAgIHNlbmQoc2VydmVyVXJsLCBsb2dEYXRhKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldFRyYWNlKG1vZHVsZU5hbWUpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUubG9jYWxTdG9yYWdlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInJlYWQgYWxsIGZyb20gbG9jYWwgc3RvcmFnZSBbIG5vdCBpbXBsZW1lbnRlZCBdXCIpO1xuICAgICAgICAgICAgLy8gcmV0dXJuIGxvY2Fsc3RvcmFnZSB0cmFjZVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1vZHVsZU5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2VzLmZpbHRlcigobXNnKT0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKG1zZy5tb2R1bGVOYW1lID09IG1vZHVsZU5hbWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlcztcblxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbmV3IEhpc3RvcnkoKTsiLCJpbXBvcnQgSGlzdG9yeSBmcm9tICcuL2hpc3RvcnknXG5pbXBvcnQge3JlbmRlcn0gZnJvbSAnLi4vaGVscGVycy9mb3JtYXQnXG5pbXBvcnQge0Nvb2tpZX0gZnJvbSAnLi4vbGliL3V0aWxzJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2R1bGUge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsIG9wdHMpIHtcbiAgICAgICAgY29uc3QgZGVidWdDb29raWUgPSBDb29raWUuZ2V0Q29va2llKG5hbWUpO1xuXG4gICAgICAgIGlmIChkZWJ1Z0Nvb2tpZSkge1xuICAgICAgICAgICAgb3B0cy5kZWJ1ZyA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRzO1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIH1cblxuICAgIGluZm8obWVzc2FnZSwgZGV0YWlscykge1xuICAgICAgICBIaXN0b3J5LndyaXRlKHRoaXMubmFtZSwgXCJpbmZvXCIsIG1lc3NhZ2UsIGRldGFpbHMsIHRoaXMub3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5kZWJ1Zykge1xuICAgICAgICAgICAgcmVuZGVyKHtcbiAgICAgICAgICAgICAgICBtb2R1bGVOYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICBkZXRhaWxzOiBkZXRhaWxzLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwiaW5mb1wiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHdhcm5pbmcobWVzc2FnZSwgZGV0YWlscykge1xuICAgICAgICBIaXN0b3J5LndyaXRlKHRoaXMubmFtZSwgXCJ3YXJuaW5nXCIsIG1lc3NhZ2UsIGRldGFpbHMsIHRoaXMub3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5kZWJ1Zykge1xuICAgICAgICAgICAgcmVuZGVyKHtcbiAgICAgICAgICAgICAgICBtb2R1bGVOYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICBkZXRhaWxzOiBkZXRhaWxzLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwid2FybmluZ1wiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN1Y2Nlc3MobWVzc2FnZSwgZGV0YWlscykge1xuICAgICAgICBIaXN0b3J5LndyaXRlKHRoaXMubmFtZSwgXCJzdWNjZXNzXCIsIG1lc3NhZ2UsIGRldGFpbHMsIHRoaXMub3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5kZWJ1Zykge1xuICAgICAgICAgICAgcmVuZGVyKHtcbiAgICAgICAgICAgICAgICBtb2R1bGVOYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgICAgICBkZXRhaWxzOiBkZXRhaWxzLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwic3VjY2Vzc1wiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGVycm9yKG1lc3NhZ2UsIGRldGFpbHMpIHtcbiAgICAgICAgSGlzdG9yeS53cml0ZSh0aGlzLm5hbWUsIFwiZXJyb3JcIiwgbWVzc2FnZSwgZGV0YWlscywgdGhpcy5vcHRpb25zKTtcblxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRlYnVnKSB7XG4gICAgICAgICAgICByZW5kZXIoe1xuICAgICAgICAgICAgICAgIG1vZHVsZU5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgIGRldGFpbHM6IGRldGFpbHMsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJlcnJvclwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRyYWNlKGFyZ3MpIHtcbiAgICAgICAgbGV0IG1vZHVsZUhpc3RvcnkgPSBIaXN0b3J5LmdldFRyYWNlKHRoaXMubmFtZSk7XG5cbiAgICAgICAgbW9kdWxlSGlzdG9yeS5mb3JFYWNoKChsb2cpPT4ge1xuICAgICAgICAgICAgcmVuZGVyKGxvZyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuXG4gICAgcHJpbnQoYXJncykge1xuICAgICAgICBpZiAoYXJncy5kZWJ1Zykge1xuICAgICAgICAgICAgQ29va2llLmNyZWF0ZUNvb2tpZSh0aGlzLm5hbWUgfHwgXCJhbGxcIiwgXCJkZWJ1Z1wiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIENvb2tpZS5kZWxldGVDb29raWUodGhpcy5uYW1lIHx8IFwiYWxsXCIpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4iLCJleHBvcnQgY29uc3QgQ29va2llID0ge1xuICAgIGNyZWF0ZUNvb2tpZTogZnVuY3Rpb24gKG5hbWUsIHZhbHVlLCBleHBpcmVUaW1lKSB7XG4gICAgICAgIGV4cGlyZVRpbWUgPSAhIWV4cGlyZVRpbWUgPyBleHBpcmVUaW1lIDogKDE1ICogNjAgKiAxMDAwKTsgLy8gRGVmYXVsdCAxNSBtaW5cbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBkYXRlLnNldFRpbWUoZGF0ZS5nZXRUaW1lKCkgKyBleHBpcmVUaW1lKTtcbiAgICAgICAgdmFyIGV4cGlyZXMgPSBcIjsgZXhwaXJlcz1cIiArIGRhdGUudG9HTVRTdHJpbmcoKTtcbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gbmFtZSArIFwiPVwiICsgdmFsdWUgKyBleHBpcmVzICsgXCI7IHBhdGg9L1wiO1xuICAgIH0sXG4gICAgZ2V0Q29va2llOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB2YXIgdmFsdWUgPSBcIjsgXCIgKyBkb2N1bWVudC5jb29raWU7XG4gICAgICAgIHZhciBwYXJ0cyA9IHZhbHVlLnNwbGl0KFwiOyBcIiArIG5hbWUgKyBcIj1cIik7XG4gICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPT0gMikge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnRzLnBvcCgpLnNwbGl0KFwiO1wiKS5zaGlmdCgpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBkZWxldGVDb29raWU6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IG5hbWUgKyAnPTsgUGF0aD0vOyBFeHBpcmVzPVRodSwgMDEgSmFuIDE5NzAgMDA6MDA6MDEgR01UOyc7XG4gICAgfVxufTsiLCIvKlxuICogQGF1dGhvciBBbGV4IENsZXZlciA8YXhjbGV2ZXJAZ21haWwuY29tPlxuICpcbiAqICBPdXRsb2cgTGlicmFyeVxuICpcbiAqICovXG5cbmltcG9ydCBNb2R1bGVGYWN0b3J5IGZyb20gJy4vbGliL21vZHVsZSdcbmltcG9ydCBIaXN0b3J5IGZyb20gJy4vbGliL2hpc3RvcnknXG5pbXBvcnQge3JlbmRlcn0gZnJvbSAnLi9oZWxwZXJzL2Zvcm1hdCdcbmltcG9ydCB7Q29va2llfSBmcm9tICcuL2xpYi91dGlscydcblxuY2xhc3MgT3V0bG9nIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5tb2R1bGVzID0ge307XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGRlYnVnOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbG9yczogdHJ1ZSxcbiAgICAgICAgICAgIHNlcnZlclVybDogZmFsc2UsXG4gICAgICAgICAgICBzeW5jOiB0cnVlLFxuICAgICAgICAgICAgbWVtb3J5OiBmYWxzZSxcbiAgICAgICAgICAgIHB1YmxpY0tleTogbnVsbFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMudHJhY2UgPSB7XG4gICAgICAgICAgICBhbGw6IChhcmdzKT0+IHtcbiAgICAgICAgICAgICAgICBsZXQgYWxsSGlzdG9yeSA9IEhpc3RvcnkuZ2V0VHJhY2UoKTtcblxuICAgICAgICAgICAgICAgIGFsbEhpc3RvcnkuZm9yRWFjaCgobWVzc2FnZSk9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcihtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnByaW50ID0ge1xuICAgICAgICAgICAgYWxsOiAoYXJncyk9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3MuZGVidWcpIHtcbiAgICAgICAgICAgICAgICAgICAgQ29va2llLmNyZWF0ZUNvb2tpZShcImFsbFwiLCBcImRlYnVnXCIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIENvb2tpZS5kZWxldGVDb29raWUoXCJhbGxcIik7XG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25maWcoYXJncykge1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLm9wdGlvbnMsIGFyZ3MpO1xuICAgICAgICBIaXN0b3J5LmNvbmZpZyh0aGlzLm9wdGlvbnMpO1xuICAgIH1cblxuICAgIGluaXQobW9kdWxlTmFtZSwgYXJncykge1xuICAgICAgICBpZiAodHlwZW9mIG1vZHVsZU5hbWUgIT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImluaXQgbWV0aG9kOiB3cm9uZyBwYXJhbWV0ZXIgJ21vZHVsZU5hbWUnLiBTaG91bGQgYmUgc3RyaW5nXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCghYXJncyBpbnN0YW5jZW9mIE9iamVjdCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImluaXQgbWV0aG9kOiB3cm9uZyBwYXJhbWV0ZXIgJ2FyZ3MnLiBTaG91bGQgYmUgYW4gb2JqZWN0XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLm9wdGlvbnMsIGFyZ3MpO1xuICAgICAgICBsZXQgdHJpbW1lZE5hbWUgPSBtb2R1bGVOYW1lLnRyaW0oKS5yZXBsYWNlKC9cXCAvaWcsIFwiX1wiKTtcblxuXG4gICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IHRoaXM7XG5cbiAgICAgICAgaWYgKCFjb21wb25lbnQubW9kdWxlc1t0cmltbWVkTmFtZV0pIHtcbiAgICAgICAgICAgIGNvbnN0IG1vZHVsZSA9IG5ldyBNb2R1bGVGYWN0b3J5KHRyaW1tZWROYW1lLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGNvbXBvbmVudC5tb2R1bGVzW3RyaW1tZWROYW1lXSA9IG1vZHVsZTtcbiAgICAgICAgICAgIHRoaXMudHJhY2VbdHJpbW1lZE5hbWVdID0gbW9kdWxlLnRyYWNlLmJpbmQobW9kdWxlKTtcbiAgICAgICAgICAgIHRoaXMucHJpbnRbdHJpbW1lZE5hbWVdID0gbW9kdWxlLnByaW50LmJpbmQobW9kdWxlKTtcbiAgICAgICAgICAgIHJldHVybiBtb2R1bGU7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk91dGxvZyBFcnJvcjogbW9kdWxlIGFscmVhZHkgZXhpc3QsIHVzZSBhbm90aGVyIG5hbWVcIik7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmlmIChnbG9iYWwud2luZG93KSB7XG4gICAgaWYgKCF3aW5kb3cuT3V0bG9nKSB7XG4gICAgICAgIHdpbmRvdy5PdXRsb2cgPSBuZXcgT3V0bG9nKCk7XG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBPdXRsb2coKTtcbiJdfQ=="}