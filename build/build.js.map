{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/helpers/format.js","src/lib/history.js","src/lib/module.js","src/outlog.js"],"names":[],"mappings":"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","file":"build.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","export const getTimeStamp = (date)=> {\n    return ((now.getMonth() + 1) + '/' +\n    (now.getDate()) + '/' +\n    now.getFullYear() + \" \" +\n    now.getHours() + ':' +\n    ((now.getMinutes() < 10)\n        ? (\"0\" + now.getMinutes())\n        : (now.getMinutes())) + ':' +\n    ((now.getSeconds() < 10)\n        ? (\"0\" + now.getSeconds())\n        : (now.getSeconds())));\n};\n\nconst symbols = {\n    success: '✔︎ ',\n    error: '✘ ',\n    warn: '⚑ ',\n    arrow: '➤ '\n};\n\nexport const rawRender = (log)=> {\n    console.log(log);\n};\n\nconst isBrowser = ()=> {\n    return !!global.Navigator;\n};\n\nconst renderInBrowser = (log)=> {\n    if (log.type == \"info\") {\n        console.log('%c [' + log.moduleName + \"] \" + '%c ' + log.message + ' ', 'background: #24292e; color: #FFF', ' color: #fff; background: #107cb7');\n\n        if (log.details) {\n            console.log('%c Details: ', 'background: #e5e5e5; color: #666');\n            let detailsString = '%c';\n\n            Object.keys(log.details).forEach((key)=> {\n                detailsString += symbols.arrow + key + \": \" + log.details[key] + \" \\n\";\n            });\n\n            console.log(detailsString + '\\n\\n', ' color: #555');\n        }\n    }\n\n    if (log.type == \"error\") {\n        console.log('%c [' + log.moduleName + \"] \" + ' %c ' + symbols.error + log.message + ' ',\n            'background: #24292e; color: #FFF', 'background: #b90000; color: #fff');\n\n\n        if (log.details) {\n            let detailsString = '%c';\n            Object.keys(log.details).forEach((key)=> {\n                detailsString += symbols.arrow + key + \": \" + log.details[key] + \" \\n\";\n            });\n            console.log(detailsString + '\\n\\n', ' color: #b90000');\n        }\n\n\n    }\n};\n\nconst renderInConsole = (log)=> {\n    console.log(log.type.toUpperCase() + \":\" + \"[ \" + log.moduleName + \" ] \" + log.message);\n};\n\nexport const render = (log)=> {\n    if (isBrowser()) {\n        renderInBrowser(log);\n    } else {\n        renderInConsole(log);\n    }\n};\nexport const renderWithTime = (log)=> {\n};","import {getTimeStamp} from '../helpers/format'\n\n\nconst checkLogDetails = (data)=> {\n    if (!data) return true;\n    \n    Object.keys(data).forEach((key)=> {\n        if (data[key] instanceof Function) {\n            throw new Error(\"Outlog: You can't pass multidimensional data to logger or functions\");\n        }\n\n        if (data[key] instanceof Object) {\n\n            Object.keys(data[key]).forEach((k2)=> {\n                if (data[key][k2] instanceof Object) {\n                    throw new Error(\"Outlog: You can't pass multidimensional data to logger\");\n                }\n\n                if (data[key][k2] instanceof Array) {\n                    throw new Error(\"Outlog: You can't pass multidimensional data to logger\");\n                }\n            });\n\n\n        }\n    });\n};\n\nclass History {\n    constructor() {\n        this.localStorage = false;\n        this.showTimeStamps = false;\n        this.messages = [];\n    }\n\n    config(options) {\n        this.localStorage = options.useMemory;\n        this.showTimeStamps = options.showTime;\n\n    }\n\n    write(module, type, message, details) {\n        checkLogDetails(details);\n\n        this.messages.push({\n            moduleName: module,\n            type: type,\n            message: message,\n            details: details\n        });\n    }\n\n    getTrace() {\n        if (this.localStorage) {\n            console.log(\"read all from local storage\");\n            // return localstorage trace\n        } else {\n            return this.messages;\n        }\n    }\n}\n\nexport default new History();","import History from './history'\nimport {render} from '../helpers/format'\n\nexport default class Module {\n    constructor(name, opts) {\n        this.options = opts;\n        this.name = name;\n    }\n\n    info(message, details) {\n        History.write(this.name, \"info\", message, details);\n\n        if (this.options.debug) {\n            render({\n                moduleName: this.name,\n                message: message,\n                details: details,\n                type: \"info\"\n            });\n        }\n    }\n\n    error(message, details) {\n        History.write(this.name, \"error\", message, details);\n\n        if (this.options.debug) {\n            render({\n                moduleName: this.name,\n                message: message,\n                details: details,\n                type: \"error\"\n            });\n        }\n    }\n\n    trace(args) {\n        let allHistory = History.getTrace();\n\n        allHistory.forEach((log)=> {\n            render(log);\n        });\n    }\n}\n","/*\n * @author Alex Clever <axclever@gmail.com>\n *\n *  Outlog Library\n *\n * */\n\nimport ModuleFactory from './lib/module'\nimport History from './lib/history'\nimport {render} from './helpers/format'\n\n\nconst Modules = {};\n\n\nclass Outlog {\n    constructor() {\n        this.options = {\n            debug: false,\n            colors: true,\n            serverUrl: false,\n            memory: false\n        };\n\n        this.trace = {\n            all: (args)=> {\n                let allHistory = History.getTrace();\n\n                allHistory.forEach((message)=> {\n                    render(message);\n                });\n            }\n        };\n    }\n\n    config(args) {\n        // server\n        // history\n        // global debug mode\n        if (Object.keys(Modules).length > 0) {\n            throw new Error(\"Outlog Error: use .config() method before initializing modules\");\n        }\n\n\n        // this.options = Object.assign(this.options, args);\n        History.config(this.options);\n    }\n\n    init(moduleName, args) {\n        if (typeof moduleName != 'string') {\n            throw new Error(\"init method: wrong parameter 'moduleName'. Should be string\");\n        }\n\n        if ((!args instanceof Object)) {\n            throw new Error(\"init method: wrong parameter 'args'. Should be an object\");\n        }\n\n        let options = Object.assign(this.options, args);\n        let trimmedName = moduleName.trim().replace(/\\ /ig, \"_\");\n\n        if (!Modules[trimmedName]) {\n            let module = new ModuleFactory(trimmedName, options);\n            Modules[trimmedName] = module;\n            this.trace[trimmedName] = module.trace;\n            return module;\n        } else {\n            throw new Error(\"Outlog Error: module already exist, use another name\");\n        }\n    }\n}\n\nif (global.window) {\n    window.Outlog = new Outlog();\n}\n\nmodule.exports = new Outlog();\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvaGVscGVycy9mb3JtYXQuanMiLCJzcmMvbGliL2hpc3RvcnkuanMiLCJzcmMvbGliL21vZHVsZS5qcyIsInNyYy9vdXRsb2cuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7QUNBTyxJQUFNLHNDQUFlLFNBQWYsWUFBZSxDQUFDLElBQUQsRUFBUztBQUNqQyxXQUFTLElBQUksUUFBSixLQUFpQixDQUFsQixHQUF1QixHQUF2QixHQUNQLElBQUksT0FBSixFQURPLEdBQ1UsR0FEVixHQUVSLElBQUksV0FBSixFQUZRLEdBRVksR0FGWixHQUdSLElBQUksUUFBSixFQUhRLEdBR1MsR0FIVCxJQUlOLElBQUksVUFBSixLQUFtQixFQUFwQixHQUNNLE1BQU0sSUFBSSxVQUFKLEVBRFosR0FFTSxJQUFJLFVBQUosRUFOQyxJQU1vQixHQU5wQixJQU9OLElBQUksVUFBSixLQUFtQixFQUFwQixHQUNNLE1BQU0sSUFBSSxVQUFKLEVBRFosR0FFTSxJQUFJLFVBQUosRUFUQyxDQUFSO0FBVUgsQ0FYTTs7QUFhUCxJQUFNLFVBQVU7QUFDWixhQUFTLEtBREc7QUFFWixXQUFPLElBRks7QUFHWixVQUFNLElBSE07QUFJWixXQUFPO0FBSkssQ0FBaEI7O0FBT08sSUFBTSxnQ0FBWSxTQUFaLFNBQVksQ0FBQyxHQUFELEVBQVE7QUFDN0IsWUFBUSxHQUFSLENBQVksR0FBWjtBQUNILENBRk07O0FBSVAsSUFBTSxZQUFZLFNBQVosU0FBWSxHQUFLO0FBQ25CLFdBQU8sQ0FBQyxDQUFDLE9BQU8sU0FBaEI7QUFDSCxDQUZEOztBQUlBLElBQU0sa0JBQWtCLFNBQWxCLGVBQWtCLENBQUMsR0FBRCxFQUFRO0FBQzVCLFFBQUksSUFBSSxJQUFKLElBQVksTUFBaEIsRUFBd0I7QUFDcEIsZ0JBQVEsR0FBUixDQUFZLFNBQVMsSUFBSSxVQUFiLEdBQTBCLElBQTFCLEdBQWlDLEtB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QUFDSDs7QUFFRCxnQkFBSyxDQUFDLElBQUQsWUFBaUIsTUFBdEIsRUFBK0I7QUFDM0Isc0JBQU0sSUFBSSxLQUFKLENBQVUsMERBQVYsQ0FBTjtBQUNIOztBQUVELGdCQUFJLFVBQVUsT0FBTyxNQUFQLENBQWMsS0FBSyxPQUFuQixFQUE0QixJQUE1QixDQUFkO0FBQ0EsZ0JBQUksY0FBYyxXQUFXLElBQVgsR0FBa0IsT0FBbEIsQ0FBMEIsTUFBMUIsRUFBa0MsR0FBbEMsQ0FBbEI7O0FBRUEsZ0JBQUksQ0FBQyxRQUFRLFdBQVIsQ0FBTCxFQUEyQjtBQUN2QixvQkFBSSxVQUFTLHFCQUFrQixXQUFsQixFQUErQixPQUEvQixDQUFiO0FBQ0Esd0JBQVEsV0FBUixJQUF1QixPQUF2QjtBQUNBLHFCQUFLLEtBQUwsQ0FBVyxXQUFYLElBQTBCLFFBQU8sS0FBakM7QUFDQSx1QkFBTyxPQUFQO0FBQ0gsYUFMRCxNQUtPO0FBQ0gsc0JBQU0sSUFBSSxLQUFKLENBQVUsc0RBQVYsQ0FBTjtBQUNIO0FBQ0o7Ozs7OztBQUdMLElBQUksT0FBTyxNQUFYLEVBQW1CO0FBQ2YsV0FBTyxNQUFQLEdBQWdCLElBQUksTUFBSixFQUFoQjtBQUNIOztBQUVELE9BQU8sT0FBUCxHQUFpQixJQUFJLE1BQUosRUFBakIiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiZXhwb3J0IGNvbnN0IGdldFRpbWVTdGFtcCA9IChkYXRlKT0+IHtcbiAgICByZXR1cm4gKChub3cuZ2V0TW9udGgoKSArIDEpICsgJy8nICtcbiAgICAobm93LmdldERhdGUoKSkgKyAnLycgK1xuICAgIG5vdy5nZXRGdWxsWWVhcigpICsgXCIgXCIgK1xuICAgIG5vdy5nZXRIb3VycygpICsgJzonICtcbiAgICAoKG5vdy5nZXRNaW51dGVzKCkgPCAxMClcbiAgICAgICAgPyAoXCIwXCIgKyBub3cuZ2V0TWludXRlcygpKVxuICAgICAgICA6IChub3cuZ2V0TWludXRlcygpKSkgKyAnOicgK1xuICAgICgobm93LmdldFNlY29uZHMoKSA8IDEwKVxuICAgICAgICA/IChcIjBcIiArIG5vdy5nZXRTZWNvbmRzKCkpXG4gICAgICAgIDogKG5vdy5nZXRTZWNvbmRzKCkpKSk7XG59O1xuXG5jb25zdCBzeW1ib2xzID0ge1xuICAgIHN1Y2Nlc3M6ICfinJTvuI4gJyxcbiAgICBlcnJvcjogJ+KcmCAnLFxuICAgIHdhcm46ICfimpEgJyxcbiAgICBhcnJvdzogJ+KepCAnXG59O1xuXG5leHBvcnQgY29uc3QgcmF3UmVuZGVyID0gKGxvZyk9PiB7XG4gICAgY29uc29sZS5sb2cobG9nKTtcbn07XG5cbmNvbnN0IGlzQnJvd3NlciA9ICgpPT4ge1xuICAgIHJldHVybiAhIWdsb2JhbC5OYXZpZ2F0b3I7XG59O1xuXG5jb25zdCByZW5kZXJJbkJyb3dzZXIgPSAobG9nKT0+IHtcbiAgICBpZiAobG9nLnR5cGUgPT0gXCJpbmZvXCIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJyVjIFsnICsgbG9nLm1vZHVsZU5hbWUgKyBcIl0gXCIgKyAnJWMgJyArIGxvZy5tZXNzYWdlICsgJyAnLCAnYmFja2dyb3VuZDogIzI0MjkyZTsgY29sb3I6ICNGRkYnLCAnIGNvbG9yOiAjZmZmOyBiYWNrZ3JvdW5kOiAjMTA3Y2I3Jyk7XG5cbiAgICAgICAgaWYgKGxvZy5kZXRhaWxzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnJWMgRGV0YWlsczogJywgJ2JhY2tncm91bmQ6ICNlNWU1ZTU7IGNvbG9yOiAjNjY2Jyk7XG4gICAgICAgICAgICBsZXQgZGV0YWlsc1N0cmluZyA9ICclYyc7XG5cbiAgICAgICAgICAgIE9iamVjdC5rZXlzKGxvZy5kZXRhaWxzKS5mb3JFYWNoKChrZXkpPT4ge1xuICAgICAgICAgICAgICAgIGRldGFpbHNTdHJpbmcgKz0gc3ltYm9scy5hcnJvdyArIGtleSArIFwiOiBcIiArIGxvZy5kZXRhaWxzW2tleV0gKyBcIiBcXG5cIjtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkZXRhaWxzU3RyaW5nICsgJ1xcblxcbicsICcgY29sb3I6ICM1NTUnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChsb2cudHlwZSA9PSBcImVycm9yXCIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJyVjIFsnICsgbG9nLm1vZHVsZU5hbWUgKyBcIl0gXCIgKyAnICVjICcgKyBzeW1ib2xzLmVycm9yICsgbG9nLm1lc3NhZ2UgKyAnICcsXG4gICAgICAgICAgICAnYmFja2dyb3VuZDogIzI0MjkyZTsgY29sb3I6ICNGRkYnLCAnYmFja2dyb3VuZDogI2I5MDAwMDsgY29sb3I6ICNmZmYnKTtcblxuXG4gICAgICAgIGlmIChsb2cuZGV0YWlscykge1xuICAgICAgICAgICAgbGV0IGRldGFpbHNTdHJpbmcgPSAnJWMnO1xuICAgICAgICAgICAgT2JqZWN0LmtleXMobG9nLmRldGFpbHMpLmZvckVhY2goKGtleSk9PiB7XG4gICAgICAgICAgICAgICAgZGV0YWlsc1N0cmluZyArPSBzeW1ib2xzLmFycm93ICsga2V5ICsgXCI6IFwiICsgbG9nLmRldGFpbHNba2V5XSArIFwiIFxcblwiO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkZXRhaWxzU3RyaW5nICsgJ1xcblxcbicsICcgY29sb3I6ICNiOTAwMDAnKTtcbiAgICAgICAgfVxuXG5cbiAgICB9XG59O1xuXG5jb25zdCByZW5kZXJJbkNvbnNvbGUgPSAobG9nKT0+IHtcbiAgICBjb25zb2xlLmxvZyhsb2cudHlwZS50b1VwcGVyQ2FzZSgpICsgXCI6XCIgKyBcIlsgXCIgKyBsb2cubW9kdWxlTmFtZSArIFwiIF0gXCIgKyBsb2cubWVzc2FnZSk7XG59O1xuXG5leHBvcnQgY29uc3QgcmVuZGVyID0gKGxvZyk9PiB7XG4gICAgaWYgKGlzQnJvd3NlcigpKSB7XG4gICAgICAgIHJlbmRlckluQnJvd3Nlcihsb2cpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJlbmRlckluQ29uc29sZShsb2cpO1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgcmVuZGVyV2l0aFRpbWUgPSAobG9nKT0+IHtcbn07IiwiaW1wb3J0IHtnZXRUaW1lU3RhbXB9IGZyb20gJy4uL2hlbHBlcnMvZm9ybWF0J1xuXG5cbmNvbnN0IGNoZWNrTG9nRGV0YWlscyA9IChkYXRhKT0+IHtcbiAgICBpZiAoIWRhdGEpIHJldHVybiB0cnVlO1xuICAgIFxuICAgIE9iamVjdC5rZXlzKGRhdGEpLmZvckVhY2goKGtleSk9PiB7XG4gICAgICAgIGlmIChkYXRhW2tleV0gaW5zdGFuY2VvZiBGdW5jdGlvbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT3V0bG9nOiBZb3UgY2FuJ3QgcGFzcyBtdWx0aWRpbWVuc2lvbmFsIGRhdGEgdG8gbG9nZ2VyIG9yIGZ1bmN0aW9uc1wiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkYXRhW2tleV0gaW5zdGFuY2VvZiBPYmplY3QpIHtcblxuICAgICAgICAgICAgT2JqZWN0LmtleXMoZGF0YVtrZXldKS5mb3JFYWNoKChrMik9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGFba2V5XVtrMl0gaW5zdGFuY2VvZiBPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT3V0bG9nOiBZb3UgY2FuJ3QgcGFzcyBtdWx0aWRpbWVuc2lvbmFsIGRhdGEgdG8gbG9nZ2VyXCIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChkYXRhW2tleV1bazJdIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT3V0bG9nOiBZb3UgY2FuJ3QgcGFzcyBtdWx0aWRpbWVuc2lvbmFsIGRhdGEgdG8gbG9nZ2VyXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuY2xhc3MgSGlzdG9yeSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubG9jYWxTdG9yYWdlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2hvd1RpbWVTdGFtcHMgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tZXNzYWdlcyA9IFtdO1xuICAgIH1cblxuICAgIGNvbmZpZyhvcHRpb25zKSB7XG4gICAgICAgIHRoaXMubG9jYWxTdG9yYWdlID0gb3B0aW9ucy51c2VNZW1vcnk7XG4gICAgICAgIHRoaXMuc2hvd1RpbWVTdGFtcHMgPSBvcHRpb25zLnNob3dUaW1lO1xuXG4gICAgfVxuXG4gICAgd3JpdGUobW9kdWxlLCB0eXBlLCBtZXNzYWdlLCBkZXRhaWxzKSB7XG4gICAgICAgIGNoZWNrTG9nRGV0YWlscyhkZXRhaWxzKTtcblxuICAgICAgICB0aGlzLm1lc3NhZ2VzLnB1c2goe1xuICAgICAgICAgICAgbW9kdWxlTmFtZTogbW9kdWxlLFxuICAgICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgICBkZXRhaWxzOiBkZXRhaWxzXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGdldFRyYWNlKCkge1xuICAgICAgICBpZiAodGhpcy5sb2NhbFN0b3JhZ2UpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicmVhZCBhbGwgZnJvbSBsb2NhbCBzdG9yYWdlXCIpO1xuICAgICAgICAgICAgLy8gcmV0dXJuIGxvY2Fsc3RvcmFnZSB0cmFjZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZXM7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBIaXN0b3J5KCk7IiwiaW1wb3J0IEhpc3RvcnkgZnJvbSAnLi9oaXN0b3J5J1xuaW1wb3J0IHtyZW5kZXJ9IGZyb20gJy4uL2hlbHBlcnMvZm9ybWF0J1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2R1bGUge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsIG9wdHMpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0cztcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB9XG5cbiAgICBpbmZvKG1lc3NhZ2UsIGRldGFpbHMpIHtcbiAgICAgICAgSGlzdG9yeS53cml0ZSh0aGlzLm5hbWUsIFwiaW5mb1wiLCBtZXNzYWdlLCBkZXRhaWxzKTtcblxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRlYnVnKSB7XG4gICAgICAgICAgICByZW5kZXIoe1xuICAgICAgICAgICAgICAgIG1vZHVsZU5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgIGRldGFpbHM6IGRldGFpbHMsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJpbmZvXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZXJyb3IobWVzc2FnZSwgZGV0YWlscykge1xuICAgICAgICBIaXN0b3J5LndyaXRlKHRoaXMubmFtZSwgXCJlcnJvclwiLCBtZXNzYWdlLCBkZXRhaWxzKTtcblxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRlYnVnKSB7XG4gICAgICAgICAgICByZW5kZXIoe1xuICAgICAgICAgICAgICAgIG1vZHVsZU5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgICAgICAgIGRldGFpbHM6IGRldGFpbHMsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJlcnJvclwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRyYWNlKGFyZ3MpIHtcbiAgICAgICAgbGV0IGFsbEhpc3RvcnkgPSBIaXN0b3J5LmdldFRyYWNlKCk7XG5cbiAgICAgICAgYWxsSGlzdG9yeS5mb3JFYWNoKChsb2cpPT4ge1xuICAgICAgICAgICAgcmVuZGVyKGxvZyk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsIi8qXG4gKiBAYXV0aG9yIEFsZXggQ2xldmVyIDxheGNsZXZlckBnbWFpbC5jb20+XG4gKlxuICogIE91dGxvZyBMaWJyYXJ5XG4gKlxuICogKi9cblxuaW1wb3J0IE1vZHVsZUZhY3RvcnkgZnJvbSAnLi9saWIvbW9kdWxlJ1xuaW1wb3J0IEhpc3RvcnkgZnJvbSAnLi9saWIvaGlzdG9yeSdcbmltcG9ydCB7cmVuZGVyfSBmcm9tICcuL2hlbHBlcnMvZm9ybWF0J1xuXG5cbmNvbnN0IE1vZHVsZXMgPSB7fTtcblxuXG5jbGFzcyBPdXRsb2cge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSB7XG4gICAgICAgICAgICBkZWJ1ZzogZmFsc2UsXG4gICAgICAgICAgICBjb2xvcnM6IHRydWUsXG4gICAgICAgICAgICBzZXJ2ZXJVcmw6IGZhbHNlLFxuICAgICAgICAgICAgbWVtb3J5OiBmYWxzZVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMudHJhY2UgPSB7XG4gICAgICAgICAgICBhbGw6IChhcmdzKT0+IHtcbiAgICAgICAgICAgICAgICBsZXQgYWxsSGlzdG9yeSA9IEhpc3RvcnkuZ2V0VHJhY2UoKTtcblxuICAgICAgICAgICAgICAgIGFsbEhpc3RvcnkuZm9yRWFjaCgobWVzc2FnZSk9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcihtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25maWcoYXJncykge1xuICAgICAgICAvLyBzZXJ2ZXJcbiAgICAgICAgLy8gaGlzdG9yeVxuICAgICAgICAvLyBnbG9iYWwgZGVidWcgbW9kZVxuICAgICAgICBpZiAoT2JqZWN0LmtleXMoTW9kdWxlcykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT3V0bG9nIEVycm9yOiB1c2UgLmNvbmZpZygpIG1ldGhvZCBiZWZvcmUgaW5pdGlhbGl6aW5nIG1vZHVsZXNcIik7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24odGhpcy5vcHRpb25zLCBhcmdzKTtcbiAgICAgICAgSGlzdG9yeS5jb25maWcodGhpcy5vcHRpb25zKTtcbiAgICB9XG5cbiAgICBpbml0KG1vZHVsZU5hbWUsIGFyZ3MpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBtb2R1bGVOYW1lICE9ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbml0IG1ldGhvZDogd3JvbmcgcGFyYW1ldGVyICdtb2R1bGVOYW1lJy4gU2hvdWxkIGJlIHN0cmluZ1wiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgoIWFyZ3MgaW5zdGFuY2VvZiBPYmplY3QpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbml0IG1ldGhvZDogd3JvbmcgcGFyYW1ldGVyICdhcmdzJy4gU2hvdWxkIGJlIGFuIG9iamVjdFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih0aGlzLm9wdGlvbnMsIGFyZ3MpO1xuICAgICAgICBsZXQgdHJpbW1lZE5hbWUgPSBtb2R1bGVOYW1lLnRyaW0oKS5yZXBsYWNlKC9cXCAvaWcsIFwiX1wiKTtcblxuICAgICAgICBpZiAoIU1vZHVsZXNbdHJpbW1lZE5hbWVdKSB7XG4gICAgICAgICAgICBsZXQgbW9kdWxlID0gbmV3IE1vZHVsZUZhY3RvcnkodHJpbW1lZE5hbWUsIG9wdGlvbnMpO1xuICAgICAgICAgICAgTW9kdWxlc1t0cmltbWVkTmFtZV0gPSBtb2R1bGU7XG4gICAgICAgICAgICB0aGlzLnRyYWNlW3RyaW1tZWROYW1lXSA9IG1vZHVsZS50cmFjZTtcbiAgICAgICAgICAgIHJldHVybiBtb2R1bGU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPdXRsb2cgRXJyb3I6IG1vZHVsZSBhbHJlYWR5IGV4aXN0LCB1c2UgYW5vdGhlciBuYW1lXCIpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5pZiAoZ2xvYmFsLndpbmRvdykge1xuICAgIHdpbmRvdy5PdXRsb2cgPSBuZXcgT3V0bG9nKCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IE91dGxvZygpO1xuIl19"}